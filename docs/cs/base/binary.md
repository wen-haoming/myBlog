---
title: 二进制
nav:
  title: api
  path: /cs/base
---

# 二进制

>在前端工作的时候遇到过表单导出Excel表格，接口返回的数据是一个二进制流，那时我在进行下载的时候如果使用的 ajax 的 api 是需要加入 `responseType: Bolb` ，不然是无法下载正确的二进制流数据，另一种方式是使用 fetch api 在返回的时候直接转化 `Blob` 格式，这也让我产生了一个疑问，Blob到底是什么，前端处理二进制流还有什么玩法，更重要的是前端处理相关？

## 进制基础知识

1. 基数R，R代表基本数码个数，二进制就是0和1这两个数，R进制的主要特点就是逢R进一，

2. 位权 Wi 是指第i位上的数码的`权重值` ，位权与数码所处的的位置`i` 有关
    例如：
    - R=10（十进制数），各个数码的权为10^i，i表示数码所处的位置。
    - 个位i=0，位权是10^0=1。
    - 十位i=1，位权是10^1=10。
    - (22.22)(十进制) = 2*10^1 + 2*10^0 + 2*10^-1 + 2*10^-2

3. 二进制转十进制

    按权展开，加权求和，以(11.11)(二进制为例)
    1*2^2+1*2^1+1*2^0+1*2^-1+1*2^-2

4. 十进制转二进制

    - 整数部分：除2取余，直到商为0，最先得到余数是最低位，最后得到的余数是最高位。
    - 小数部分：乘2取整，直到积为0或者直到精度要求为止，最先得到证书是最高位。

### 原码

原码(true form)是一种计算机中对数字的二进制定点表示方法。原码表示法在数值前面增加了一位符号位（即最高位为符号位）：正数该位为0，负数该位为1（0有两种表示：+0和-0），其余位表示数值的大小。
   
优点：
- 我们用8位二进制表示一个数，+11的原码为00001011，-11的原码就是10001011
缺点：
- 原码不能直接参加运算，可能会出错。例如数学上，1+(-1)=0，而在二进制中 00000001+10000001=10000010，换算成十进制为-2。显然出错了，所以原码的符号位不能直接参与运算，必须和其他位分开，这就增加了硬件的开销和复杂性

### 反码

正数不变，附属的除符号位外取反，反码通常是用来由原码求补码或者由补码求原码的过渡码。

### 补码

正数不变，负数在反码的基础加1，补码是计算机把减法运算转化为加法运算的关键编码。

### 小数点表示

在计算机中，小数点极其位置是隐含规定的，小数点并不占用存储空间。
- 定点数：小数点的位置是固定不变的，分为定点整数和定点小数。
- 浮点数：小数点的位置是会变化的。
  - 对于既不是定点整数，也不是定点小数的数用**浮点数**表示
  - 在计算机中通常把浮点数N分成**阶码**和**尾数**两部分来表示
  - 小数点位置由**阶码**规定，因此是浮动的。
  - 3.5(10进制) = 11.1(2进制) = 0.111*2^10

## IEEE754标准

javascript采用的是双精度（64位）
符号位决定了一个数的正负，指数部分决定了数值的大小，小数有效位部分决定了数值的精度。

- 符号位（第一位）
- 指数位（2~12共11位） 注意：这是二进制
- 小数有效位（13~64共52位） 注意：这是二进制

3.5(十进制) = 11.1(二进制) = 0.111*2^10 (指数位二进制)


> 为什么 0.1 + 0.2 != 0.3?
>
> 因为0.1 和0.3 转化为二进制的时候都是一个无线循环的小数，导致最后的结果存在精度差异。

## JS大数相加

为什么需要这个，因为 js 遵循 IEEE754 标准，所以数值都是有范围的，其中 js 获取最大值是`Number.MAX_VALUE` 

```js

let numa = '1231231231231233';
let numb = '1231231231231233';

function bigAdd(a,b){ 
    a = a.split('').map(item=> parseInt(item) ).reverse()
    b = b.split('').map(item=> parseInt(item) ).reverse()
   let targetArr = [].fill(0,0,((a.length >= b.length?a.length:b.length))+1)    


   for(let i = 0;i < a.length;i++ ){
        targetArr[i] = a[i]
  }
    
   let up = 0

    for(let i = 0; i < b.length; i ++){
         targetArr[i] = targetArr[i] + b[i] + up;
        if(targetArr[i]> 9){
        targetArr[i] = targetArr[i] %10
             up = 1
        }else{
             up = 0
        }   
  }
        return targetArr.reverse().join('')

 }

bigAdd(numa,numb)

````

列竖式方法，从低位想最高位计算。



## 计算机中的数据

- 数据
  - 数值数据
    - 无符号数据
    - 有符号数据
  - 非数值数据
    - 文字
    - 图像

大纲:
1. 数据输出
   1. Data URL
   2. Object URL
2. Blob
3. ArrayBuffer
4. typedArray
5. 

# 浏览器相关api 

## Object URL

## Blob API

## Array Buffer 与 typeArray

## Blob 与 ArrayBuffer

## DataView 与 ArrayBuffer


 

